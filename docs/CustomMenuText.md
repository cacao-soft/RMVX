# テキストウィンドウ

- テキストを表示するウィンドウを追加します。

## ダウンロード

- [スクリプト](https://github.com/cacao-soft/RMVX/raw/main/CustomMenu/CustomMenuText.rb)

## 設定項目

### 各ウィンドウの設定

`WINDOW_SET = []`の中に`{...}`を記述して設定します。\
`{...}`で囲まれた部分が１つのウィンドウの設定となります。\
まず、ウィンドウの位置とサイズを設定します。

```ruby
{
  :wind => [x, y, width, height]
}
```

さらに、表示する文章を設定します。
複数の要素を記述する際は、間に , を入れます。

```ruby
{
  :wind => [x, y, width, height],
  :text > 'テキスト'
}
```

これが最低限の設定となります。\
ここからさらに、行幅、不透明度、可視状態を設定可能です。\
以下、３つに設定されている値は、省略時の初期値です。

```ruby
{
  :wind => [x, y, width, height],
  :text => 'テキスト',
  :line => 24,   # 行幅
  :opct => 200,  # 不透明度
  :vsbl => true  # 可視状態
}
```

複数のウィンドウを設定するには、{}を増やして同じように設定します。\
その際、間に , を入れるのを忘れないように注意してください。

```ruby
WINDOW_SET = [
  {
    # ウィンドウ１の設定
  },
  {
    # ウィンドウ２の設定
  }
]
```

### テキストの設定

```ruby
:text => 'テキスト'
```

表示するテキストは、' (シングルクォート)で囲みます。\
ダブルだと、\ を２つ並べないといけなくなるからです。

テキスト内に改行を入れる場合は、\nと記述します。\
あとは、イベントコマンド「文章の表示」の要領で設定してください。

### 可視状態の設定

```ruby
:vsbl => true
```

この値をfalseにするとウィンドウを非表示にできます。\
Custom Menu Baseの項目処理の設定で、`'%@text_windows[ウィンドウの番号] ^= true'`と設定すると、その項目で表示・非表示を変更できます。\
※ ウィンドウの番号は、設定順に０から割り当てられます。

### 制御文字

テキスト内には、次のような制御文字を使用できます。

- `\V[n]`
  - イベント変数 n 番の値を表示
- `\S[n,on,off]`
  - スイッチ n 番の状態に合わせて、on/off の文字を表示
  - テキストは、そのまま表示するので左右に空白や " は不要です。
  - > 例）\S[3,ＯＮテキスト,ＯＦＦテキスト]
- `\S[s,on,off]`
  - スクリプト s の状態に合わせて、on/off の文字を表示
  - １つ目の引数が数値意外だと、スクリプトとして処理します。
  - > 例）\S[$TEST,デバッグ,通常]
- `\N[n]`
  - アクター n 番の名前を表示
  - 0 の場合は、パーティの先頭のアクターに たち を付けて表示
- `\C[n]`
  - カラーインデックス n 番の色に変更
- `\I[n]`
  - アイコンインデックス n 番のアイコンを表示
- `\S[n]`
  - 文字サイズを n に変更 (最小 10 : 最大 40 まで)
- `\X[n]`
  - 描画ｘ座標を n に変更
  - \\X+[n] : 現在の座標に n 加える
  - \\X-[n] : 現在の座標から n 減らす
- `\Y[n]`
  - 描画ｙ座標を n に変更
  - \\Y+[n] : 現在の座標に n 加える
  - \\Y-[n] : 現在の座標から n 減らす
- `\L[n]`
  - 行幅を n に変更 (最小 8 まで)
- `\P[param] ... \/P`
  - 任意の幅のブロックを作成します。ブロック内の文字位置を指定できます。
  - param : 文字位置のみ、もしくは文字位置＋横幅を設定します。
    - C .. 中央揃え、L .. 左揃え、R .. 右揃え
  - 横幅を省略した場合は、行単位となります。
  - また、省略する場合の制御文字は、行の先頭に記入する必要があります。
  - 行単位でも終了位置(\/P)の指定は、必要になります。
  - 例）\P[R]右揃え\/P
  - 文字位置に続けて、横幅を指定するとその範囲で文字位置を調節します。
  - 横幅より描画文字が多い場合は、横幅で切って以降表示しません。
  - 例）\P[C80]あいう\/P
  - ※ 留意点 ※
    - この制御文字内では、\n, \P, \S[n]の制御文字は使用できません。
    - \B, \I のズレは考慮していません。右揃えで端が切れる場合があります。
    - 右端にスペースを入れるか、\X[n]を使用して調整してください。
- `\B ... \/B`
  - \B 以降の文字を太字で描画します。
  - \/B で太字描画を終了します。
- `\I ... \/I`
  - \I 以降の文字を斜体で描画します。
  - \/I で斜体描画を終了します。
- `\G`
  - 所持金を表示
- `\W`
  - 歩数を表示
- `\S`
  - セーブ回数を表示
- `$[...]$`
  - ... に記述されたスクリプトを実行 (描画)
